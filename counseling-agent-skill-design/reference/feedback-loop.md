# Feedback Loop

## 適用條件（When to Use）

- 產出品質敏感，有明確的驗證標準（腳本、reference doc、checklist）
- 一次產出不一定正確，需要迭代修正
- 驗證結果可以指引修正方向（不是單純的 pass/fail）

## 概念說明

執行 → 驗證 → 修正 → 重複，直到通過驗證門檻。關鍵在於驗證機制要能產出具體的錯誤訊息，讓 Claude 知道該修什麼。

## 範例

以「HTML → Markdown 轉換 Skill」為例，workflow 可設計為：

````markdown
## HTML → Markdown 轉換流程

**Step 1: 讀取 HTML 原始檔**

讀取指定的 HTML 檔案內容。

**Step 2: 轉換為 Markdown**

根據轉換規則，將 HTML 結構轉為對應的 Markdown 格式。

**Step 3: 驗證轉換結果**

對照驗證 checklist 檢查：
- [ ] 所有標題層級正確對應（h1→#, h2→##, ...）
- [ ] 表格結構完整，欄位數一致
- [ ] 連結與圖片路徑正確轉換
- [ ] 無遺漏的 HTML 標籤殘留

**若驗證未通過：**
- 檢視未通過的項目與具體問題
- 回到 Step 2，針對問題修正轉換邏輯
- 重新執行 Step 3 驗證

**Step 4: 輸出最終 Markdown 檔案**

驗證全部通過後，寫入目標檔案。
````

### 設計重點

- 驗證標準要具體、可檢查，避免模糊的「品質好不好」
- 驗證失敗時要提供具體錯誤訊息，不是只說「失敗了」
- 明確標示迴圈的起點和終點（回到哪一步、什麼時候結束）
