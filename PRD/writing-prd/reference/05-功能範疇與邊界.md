# 5. 功能範疇與邊界

## 目的

明確定義這次專案做什麼、不做什麼，避免範疇蔓延（scope creep）。

## 撰寫規範

### 基本結構

```markdown
## 功能範疇與邊界

### 本次包含的功能
- ✅ 新增商品至購物車
- ✅ 修改購物車內商品數量
- ✅ 刪除購物車內商品
- ✅ 購物車資料跨裝置同步（會員）
- ✅ 購物車商品庫存檢查

### 本次不包含的功能（未來版本考慮）
- ❌ 購物車商品推薦功能
- ❌ 購物車分享給他人
- ❌ 購物車優惠券自動套用

### 已知限制
- **技術限制**：購物車最多儲存 100 件商品（受後端資料庫限制）
- **業務限制**：訪客購物車資料保留 7 天（localStorage 容量考量）
```

## 關鍵要素

### 1. 本次包含的功能
- **清晰列舉**：逐項列出本次要實作的功能
- **顆粒度適中**：不要太粗（如「購物車功能」）也不要太細（如「購物車按鈕的顏色」）
- **可驗證性**：每個功能都應能對應到驗收標準
- **使用 ✅ 符號**：增加可讀性

### 2. 本次不包含的功能
- **明確說明原因**：為什麼不做？常見原因：
  - 時程壓力，延後至下一版本
  - 技術依賴尚未完成
  - 業務優先級較低
  - 需求不明確，需進一步研究
- **規劃未來時程**：若有規劃，標註預計版本（如 v2.0）
- **使用 ❌ 符號**：增加可讀性

### 3. 已知限制
分為兩類：
- **技術限制**：由技術架構、效能、相容性等因素造成的限制
- **業務限制**：由業務規則、法規、政策等因素造成的限制

每個限制都應說明：
- 限制的具體內容
- 造成限制的原因
- 是否有解決方案或替代方案

## 撰寫技巧

### 技巧 1：使用對比方式呈現
透過「包含」vs「不包含」的對比，讓團隊清楚理解邊界。

### 技巧 2：說明「為什麼不做」
這是最常被忽略但最重要的部分。說明原因可以：
- 避免未來重複討論
- 幫助團隊理解優先級
- 記錄決策脈絡

### 技巧 3：限制要具體且可量化
❌ **模糊描述**：「購物車不能太大」
✅ **具體描述**：「購物車最多儲存 100 件商品」

### 技巧 4：區分「限制」和「邊界條件」
- **限制**：系統本身的上限或約束
- **邊界條件**：使用者操作時可能遇到的邊界情況
- 限制寫在此章節，邊界條件寫在「邊界條件與異常處理」章節

## 功能顆粒度判斷

### 適當的顆粒度
✅ 新增商品至購物車
✅ 修改購物車內商品數量
✅ 購物車資料跨裝置同步

### 過粗的顆粒度
❌ 購物車功能（太粗，無法判斷具體範圍）
❌ 電商系統（太粗，涵蓋整個系統）

### 過細的顆粒度
❌ 購物車按鈕的顏色（太細，屬於 UI 設計細節）
❌ 購物車 API 的請求格式（太細，屬於技術實作細節）

## 注意事項

1. **範疇蔓延風險**：開發過程中容易出現「順便做一下」的需求，應回到此章節檢查是否在範圍內
2. **與優先級對應**：「本次不包含」的功能可在優先級章節標註為 P2 或未來版本
3. **限制要提前溝通**：已知限制應在專案啟動時就與團隊和利益相關人溝通
4. **記錄決策理由**：為什麼不做某功能的理由應記錄下來，避免未來重複討論

## 常見錯誤

❌ **錯誤示範 1**：功能描述過於籠統
```markdown
### 本次包含的功能
- ✅ 購物車功能
```
**問題**：無法判斷具體要做哪些功能

✅ **正確示範**：
```markdown
### 本次包含的功能
- ✅ 新增商品至購物車
- ✅ 修改購物車內商品數量
- ✅ 刪除購物車內商品
```

❌ **錯誤示範 2**：不包含的功能沒有說明原因
```markdown
### 本次不包含的功能
- ❌ 購物車商品推薦功能
- ❌ 購物車分享給他人
```
**問題**：不知道為什麼不做，未來可能重複討論

✅ **正確示範**：
```markdown
### 本次不包含的功能（未來版本考慮）
- ❌ 購物車商品推薦功能（時程壓力，延後至 v2.0）
- ❌ 購物車分享給他人（需求不明確，需進一步研究）
```

❌ **錯誤示範 3**：限制描述模糊
```markdown
### 已知限制
- 購物車有大小限制
```
**問題**：不知道具體限制是什麼

✅ **正確示範**：
```markdown
### 已知限制
- **技術限制**：購物車最多儲存 100 件商品（受後端資料庫限制）
```

## 適用場景

- ✅ 專案啟動時，定義專案範圍
- ✅ 需求評審時，確保團隊對範圍有共識
- ✅ 開發過程中，判斷新需求是否在範圍內
- ✅ 專案驗收時，檢查是否完成所有範圍內功能

## 與其他章節的關聯

- **問題定義與目標**：功能範疇應能解決問題描述中的核心痛點
- **使用者故事與情境**：功能範疇應涵蓋使用者故事中的主要路徑
- **優先級**：本次包含的功能應對應 P0 或 P1，不包含的功能可能是 P2
- **外部依賴與技術約束**：已知限制可能來自外部依賴的約束

## 範疇變更管理

### 當需求變更時
1. **評估影響**：新需求是否在原定範圍內？
2. **更新文件**：若範圍變更，更新此章節並記錄在變更日誌
3. **溝通團隊**：通知相關人員範圍變更及影響
4. **調整時程**：評估是否需要調整開發時程或優先級

### 範疇變更決策矩陣

| 情況 | 行動 |
|------|------|
| 新需求在原定範圍內 | 正常執行，無需調整 |
| 新需求超出範圍但重要 | 評估資源，調整範圍和時程 |
| 新需求超出範圍且不緊急 | 記錄為「未來版本考慮」 |
| 新需求與目標不符 | 拒絕或重新評估專案目標 |

## 驗證檢查

完成此章節後，檢查以下項目：
- [ ] 本次包含的功能清單完整且具體
- [ ] 本次不包含的功能有說明原因
- [ ] 已知限制有區分技術限制和業務限制
- [ ] 功能範疇與問題定義的痛點對應
- [ ] 團隊對功能範疇有共識
